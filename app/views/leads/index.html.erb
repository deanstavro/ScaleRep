<div id="title" class="jumbotron">
  <div class = "container">
    <br/>
    <h1><%= @user.client_company.name if @user.client_company %> Lead List</h1>
  </div>
</div>


<div class="thin-margins">
  <h2> Upload CSV Lead List</h2>
  <p class="notice"><%= notice %></p>


  <h3> Use these exact fields in your csv header:</h3>
  <p>
    first_name, last_name, email, campaign_name, title, company, company_domain, phone_type, phone_number, linkedin, timezone
    <br>
    <br> * first_name, last_name, email, and campaign_name are required
    <br> * Your csv file should not have any other headers than the ones above
    <br> * duplicates in the system will not be uploaded
  </p>




    <%= form_tag import_leads_path, multipart: true do %>

    <%= file_field_tag :file %>
    <%= submit_tag "Import CSV" %>
  <% end %>
</div>

<% if false %>
<div class="container">
  <h2> Qualified Leads</h2>
  <table class="table table-striped">
    <thead class="thead-light">
      <tr>
        <th scope="col">Date Sourced</th>
        <th scope="col">Handed To:</th>
        <th scope="col">Name</th>
        <th scope="col">Company</th>
        <th scope="col">Timeline</th>
        <th scope="col">Scope</th>
        <th scope="col">Other Notes</th>
        <th scope="col">Predicted Deal Size</th>

        <th scope="col">Contract Sent?</th>
        <th scope="col">Contract Amount</th>

      </tr>
    </thead>

    <tbody>
      <% @leads.each do |lead| %>
        <tr>
          <td><%= lead.date_sourced.strftime("%m-%d-%Y") %></td>
          <td><%= lead.email_handed_off_too %></td>
          <td><%= lead.name %></td>
          <td><%= lead.company %></td>
          <td><%= lead.timeline %></td>
          <td><%= lead.project_scope %></td>
          <td><%= lead.external_notes %></td>
          <td>$<%= lead.potential_deal_size %></td>

          <td><%= lead.contract_sent %></td>
          <td>$<%= lead.contract_amount %></td>


        </tr>

      <% end %>
    </tbody>
  </table>
</div>
<% end %>

<div id="accordion">
  <div class="card">
    <div class="card-header" id="headingOne">
      <h5 class="mb-0">
        <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          Collapsible Group Item #1
        </button>
      </h5>
    </div>

    <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
      <div class="card-body">
        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
      </div>
    </div>
  </div>
</div>



<div class = 'thin_margins'>
  <h2> Qualified Leads</h2>

  <% if @qualified_opps.count > 0 %>


    <div class = "qualified_leads" style="overflow: auto;">
      <table class = " airtable_data table table-striped">
          <thead class = "thead-dark">
            <tr>
              <% @qualified_opps[0].column_mappings.values.each do |column_map| %>
                <% if column_map != "campaign" && column_map != "Product" && column_map != "notes" && column_map != "last_touchpoint" %>
                  <th scope = 'col'><%= column_map %></th>
                <% end %>
              <% end %>
            </tr>
          </thead>

          <tbody>
            <% @qualified_opps.each do |lead| %>
              <tr>
                <% lead.fields.each do |field| %>
                  <% if field[0] != "campaign" && field[0] != "Product" && field[0] != "notes" && field[0] != "last_touchpoint" %>
                    <td> <%= field[1] %></td>
                  <% end %>
                <% end %>
              </tr>
            <% end %>
          </tbody>
      </table>

    </div>
  <% else %>

    <p> No qualified leads </p>

  <% end %>




  <h2> Pending Leads</h2>

  <% if @pending_opps.count > 0 %>

    <div class = "pending_leads" style="overflow: auto;">
      <table class = " airtable_data table table-striped">
          <thead class = "thead-dark">
            <tr>
              <% @pending_opps[0].column_mappings.values.each do |column_map| %>
                <% if column_map != "campaign" && column_map != "Product" && column_map != "notes" && column_map != "handed_off_to" && column_map !="predicted_deal_size" && column_map !="contract_stage" %>
                  <th scope = 'col'><%= column_map %></th>
                <% end %>
              <% end %>
            </tr>
          </thead>

          <tbody>
            <% @pending_opps.each do |lead| %>
              <tr>
                <% lead.fields.each do |field| %>
                  <% if field[0] != "campaign" && field[0] != "Product" && field[0] != "notes" && field[0] != "handed_off_to" && field[0] !="predicted_deal_size" && field[0] !="contract_stage" %>
                    <td> <%= field[1] %></td>
                  <% end %>
                <% end %>
              </tr>
            <% end %>
          </tbody>
      </table>
    </div>

  <% else %>

    <p> No pending leads </p>

  <% end %>
</div>
